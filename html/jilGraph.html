 <head>
    <title>Loading...</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
    <script type="text/javascript" src="../jslib/jquery.jsPlumb-1.5.5-min.js"></script>

	<script type="text/javascript" src="../js/jilParser.js"></script>
    <script type="text/javascript" src="../js/JilConnection.js"></script>
    <script type="text/javascript" src="../js/GraphBuilder.js"></script>
    <link rel="stylesheet" href="../css/jilGraph.css">

<!--     <script type="text/javascript" src="../data/example.js"></script> -->

    <script type="text/javascript">
        "use strict";
        
        $( document ).ready(function() {
            try {
                var iFileName = 2; // index of the capture group of in the regex
                var match = /(\?|&)jil=([^&]*)/.exec(decodeURIComponent(document.location.search));
                var sourceJilFile = (match) ? match[iFileName] : null;
                $("title").text(sourceJilFile.replace(/^.*[\\\/]/, ''));
                $("#title").text(sourceJilFile);
                $("#sourceJil").load(sourceJilFile, function() {
                    var parser = new JilParser();
                    var builder = new GraphBuilder(parser.parse($("#sourceJil").text()), $("#graphContainer"));
                    $("#daysOfWeek").buttonset().show();
                    builder.draw();
                    $("#daysOfWeek :radio").click(function(e) { builder.setDayOfWeek(this.id.replace(/^day_/, "")); } );
                });
            } catch (e) {
                window.onload = function() { window.scrollTo(0, 0); };
                $("#errorPane").append(getErrorText(e)).css("color", "red");
                $('body').animate({scrollTop: $("#errorPane").offset().top }, 1);
            }
        });
        
        function getErrorText(errorObj) {
            return "ERROR: " + errorObj.name + "<br>" 
                + "Message: " + errorObj.message + "<br>" 
                + "File: " + errorObj.fileName + "<br>" 
                + "Line: " + errorObj.lineNumber + "<br>" 
                + errorObj.stack;
        }
 </script>
 </head>
 <body>
    <div id="title" class="title"></div>
    <div id="daysOfWeek" class="no-text-selection" hidden>
        <input type="radio" id="day_any" name="daysOfWeek" checked="checked"><label for="day_any">ANY</label>
        <input type="radio" id="day_mo" name="daysOfWeek" ><label for="day_mo" class="">Monday</label>
        <input type="radio" id="day_tu" name="daysOfWeek"><label for="day_tu">Tuesday</label>
        <input type="radio" id="day_we" name="daysOfWeek"><label for="day_we">Wednesday</label>
        <input type="radio" id="day_th" name="daysOfWeek"><label for="day_th">Thursday</label>
        <input type="radio" id="day_fr" name="daysOfWeek"><label for="day_fr">Friday</label>
        <input type="radio" id="day_sa" name="daysOfWeek"><label for="day_sa">Saturday</label>
        <input type="radio" id="day_su" name="daysOfWeek"><label for="day_su">Sunday</label>
    </div>
    <div id="errorPane" class="error"></div>
    <div id="graphContainer"></div>
    <code id="sourceJil" style="display:none">
   </code>
 </body>
 