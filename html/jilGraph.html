 <head>
    <title>Loading...</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../jslib/jquery.jsPlumb-1.5.5-min.js"></script>

	<script type="text/javascript" src="../js/jilParser.js"></script>
    <script type="text/javascript" src="../js/JilConnection.js"></script>
    <script type="text/javascript" src="../js/GraphBuilder.js"></script>
    <link rel="stylesheet" href="../css/jilGraph.css">

<!--     <script type="text/javascript" src="../data/example.js"></script> -->

    <script type="text/javascript">
        "use strict";
        
        $( document ).ready(function() {
            try {
                var iFileName = 2; // index of the capture group of in the regex
                var match = /(\?|&)jil=([^&]*)/.exec(decodeURIComponent(document.location.search));
                var sourceJilFile = (match) ? match[iFileName] : null;
                $("title").text(sourceJilFile.replace(/^.*[\\\/]/, ''));
                $("#title").text(sourceJilFile);
                $("#sourceJil").load(sourceJilFile, function() {
                    var parser = new JilParser();
                    var builder = new GraphBuilder(parser.parse($("#sourceJil").text()), $("#graphContainer"));
                    builder.draw();
                });
            } catch (e) {
                window.onload = function() { window.scrollTo(0, 0); };
                $("#errorPane").append(getErrorText(e)).css("color", "red");
                $('body').animate({scrollTop: $("#errorPane").offset().top }, 1);
            }
        });
        
        function getErrorText(errorObj) {
            return "ERROR: " + errorObj.name + "<br>" 
                + "Message: " + errorObj.message + "<br>" 
                + "File: " + errorObj.fileName + "<br>" 
                + "Line: " + errorObj.lineNumber + "<br>" 
                + errorObj.stack;
        }
 </script>
 </head>
 <body>
    <div id="title" class="title"></div>
    <div id="errorPane" class="error"></div>
    <div id="graphContainer"></div>
    <code id="sourceJil" style="display:none">
   </code>
 </body>
 